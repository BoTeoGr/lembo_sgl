<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Crear Producción</title>
		<link rel="stylesheet" href="../css/pages/gestiones.css">
		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0"
		/>
		<script src="../js/pages/Productions.js"></script>
		<script src="../js/pages/Management.js"></script>
	</head>
	<body>
		<main class="create-form">
			<header class="create-header">
				<h1 class="create-header__title">Crear Producción</h1>
				<div class="create-header__buttons">
					<button class="button button--outline">
						<span class="material-symbols-outlined button__icon">save</span>
						Guardar Borrador
					</button>
					<button class="button button--primary">
						<span class="material-symbols-outlined button__icon"
							>check_circle</span
						>
						Crear Producción
					</button>
				</div>
			</header>

			<div class="create-tabs">
				<div class="create-tab create-tab--active">Detalles Principales</div>
				<div class="create-tab">Sensores</div>
				<div class="create-tab">Insumos</div>
			</div>

			<!-- Tab 1: Detalles Principales -->
			<div class="create-tab-content tab-details">
				<div class="form-section">
					<h2 class="form-section__title">Información Básica</h2>
					<p class="form-section__description">
						Ingrese la información básica de la producción
					</p>

					<div class="form-row">
						<div class="form-field">
							<label class="form-field__label"
								>Identificador de Producción</label
							>
							<input
								type="text"
								class="form-field__input"
								value="PROD-16042025-0001"
								readonly
							/>
							<span class="form-field__helper">Generado automáticamente</span>
						</div>
						<div class="form-field">
							<label class="form-field__label">Responsable</label>
							<div class="form-field__select-container">
								<select class="form-field__select">
									<option value="juan">Juan Pérez</option>
									<option value="maria">María López</option>
									<option value="carlos">Carlos Rodríguez</option>
								</select>
								<button class="form-field__action-button">
									<span class="material-symbols-outlined">add_circle</span>
								</button>
							</div>
						</div>
					</div>

					<div class="form-field form-field--full">
						<label class="form-field__label">Nombre de Producción</label>
						<input
							type="text"
							class="form-field__input"
							placeholder="Ingrese el nombre de la producción"
						/>
						<span class="form-field__helper"
							>Entre 3 y 100 caracteres, debe contener al menos una letra</span
						>
					</div>

					<div class="form-row">
						<div class="form-field">
							<label class="form-field__label">Cultivo</label>
							<div class="form-field__select-container">
								<select class="form-field__select">
									<option value="">Seleccionar cultivo</option>
									<option value="maiz">Maíz</option>
									<option value="trigo">Trigo</option>
									<option value="papa">Papa</option>
								</select>
								<button class="form-field__action-button">
									<span class="material-symbols-outlined">add_circle</span>
								</button>
							</div>
						</div>
						<div class="form-field">
							<label class="form-field__label">Ciclo de Cultivo</label>
							<div class="form-field__select-container">
								<select class="form-field__select">
									<option value="">Seleccionar ciclo</option>
									<option value="primavera">Primavera - Verano</option>
									<option value="otono">Otoño - Invierno</option>
								</select>

								<button class="form-field__action-button">
									<span class="material-symbols-outlined">add_circle</span>
								</button>
							</div>
						</div>
					</div>

					<div class="form-row">
						<div class="form-field">
							<label class="form-field__label">Fecha de Inicio</label>
							<input type="date" class="form-field__date" value="2025-04-16" />
						</div>
						<div class="form-field">
							<label class="form-field__label">Fecha de Fin (Estimada)</label>
							<input type="date" class="form-field__date" value="2025-07-16" />
						</div>
					</div>

					<div class="form-row">
						<div class="form-field">
							<label class="form-field__label">Inversión</label>
							<div class="form-field__currency-container">
								<span class="form-field__currency-symbol">$</span>
								<input
									type="number"
									class="form-field__currency"
									value="0"
									min="0"
									step="1000"
								/>
							</div>
							<span class="form-field__helper"
								>Calculado automáticamente en base a los insumos</span
							>
						</div>
						<div class="form-field">
							<label class="form-field__label"
								>Meta (Estimación de Ganancias)</label
							>
							<div class="form-field__currency-container">
								<span class="form-field__currency-symbol">$</span>
								<input
									type="number"
									class="form-field__currency"
									value="0"
									min="0"
									step="1000"
								/>
							</div>
							<span class="form-field__helper">Calculado automáticamente</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Tab 2: Sensores (Initially hidden via CSS) -->
			<div class="create-tab-content tab-sensors hidden">
				<div class="form-section">
					<h2 class="form-section__title">Sensores</h2>
					<p class="form-section__description">
						Seleccione hasta 3 sensores para esta producción
					</p>

					<div class="form-field form-field--full">
						<label class="form-field__label">Sensores</label>
						<div class="form-field__dropdown-container">
							<div class="selected-counter">3 sensores seleccionados</div>
							<button class="dropdown-button">
								<span class="material-symbols-outlined">expand_more</span>
							</button>
							<button class="form-field__action-button">
								<span class="material-symbols-outlined">add_circle</span>
							</button>
						</div>
					</div>

					<!-- Sensores Dropdown -->
					<div class="sensors-dropdown">
						<div class="sensors-search">
							<span class="material-symbols-outlined">search</span>
							<input type="text" placeholder="Buscar sensor..." />
						</div>

						<div class="sensor-item">
							<input type="checkbox" checked />
							<div class="sensor-details">
								<div class="sensor-name">Sensor de Humedad</div>
								<div class="sensor-type">Humedad</div>
								<div class="sensor-info">
									<span>Fabricante: AgroTech</span>
									<span>Precisión: ±2%</span>
								</div>
								<div class="sensor-info">
									<span>Rango: 0-100%</span>
									<span>Batería: 12 meses</span>
								</div>
							</div>
						</div>

						<div class="sensor-item">
							<input type="checkbox" checked />
							<div class="sensor-details">
								<div class="sensor-name">Sensor de Temperatura</div>
								<div class="sensor-type">Temperatura</div>
								<div class="sensor-info">
									<span>Fabricante: TempSense</span>
									<span>Precisión: ±0.5°C</span>
								</div>
								<div class="sensor-info">
									<span>Rango: -30 a +60°C</span>
									<span>Batería: 18 meses</span>
								</div>
							</div>
						</div>

						<div class="sensor-item">
							<input type="checkbox" checked />
							<div class="sensor-details">
								<div class="sensor-name">Sensor de pH</div>
								<div class="sensor-type">pH</div>
								<div class="sensor-info">
									<span>Fabricante: SoilTech</span>
									<span>Precisión: ±0.1 pH</span>
								</div>
								<div class="sensor-info">
									<span>Rango: 0-14 pH</span>
									<span>Batería: 9 meses</span>
								</div>
							</div>
						</div>

						<div class="sensor-item">
							<input type="checkbox" checked />
							<div class="sensor-details">
								<div class="sensor-name">Sensor de Luz</div>
								<div class="sensor-type">Luz</div>
								<div class="sensor-info">
									<span>Fabricante: LightSense</span>
									<span>Precisión: ±3%</span>
								</div>
								<div class="sensor-info">
									<span>Rango: 0-100,000 lux</span>
									<span>Batería: 15 meses</span>
								</div>
							</div>
						</div>
					</div>

					<h3 class="subsection-title">Detalles de Sensores Seleccionados</h3>

					<div class="selected-sensors">
						<!-- Sensor de Humedad -->
						<div class="sensor-card sensor-card--blue">
							<div class="sensor-card__header">
								<div>
									<div class="sensor-card__title">Sensor de Humedad</div>
									<div class="sensor-card__type">Humedad</div>
								</div>
								<div class="sensor-card__fabricante">Fabricante: AgroTech</div>
							</div>
							<div class="sensor-card__content">
								<div class="sensor-card__item">
									<span class="sensor-card__label">Rango:</span>
									<span class="sensor-card__value">0-100%</span>
								</div>
								<div class="sensor-card__item">
									<span class="sensor-card__label">Precisión:</span>
									<span class="sensor-card__value">±2%</span>
								</div>
								<div class="sensor-card__item">
									<span class="sensor-card__label">Batería:</span>
									<span class="sensor-card__value">12 meses</span>
								</div>
								<div class="sensor-card__item">
									<span class="sensor-card__label">Instalación:</span>
									<span class="sensor-card__value">15/02/2024</span>
								</div>
							</div>
							<div class="sensor-card__description">
								Sensor de humedad de suelo de alta precisión con comunicación
								inalámbrica
							</div>
						</div>

						<!-- Sensor de Luz -->
						<div class="sensor-card sensor-card--yellow">
							<div class="sensor-card__header">
								<div>
									<div class="sensor-card__title">Sensor de Luz</div>
									<div class="sensor-card__type">Luz</div>
								</div>
								<div class="sensor-card__fabricante">
									Fabricante: LightSense
								</div>
							</div>
							<div class="sensor-card__content">
								<div class="sensor-card__item">
									<span class="sensor-card__label">Rango:</span>
									<span class="sensor-card__value">0-100,000 lux</span>
								</div>
								<div class="sensor-card__item">
									<span class="sensor-card__label">Precisión:</span>
									<span class="sensor-card__value">±3%</span>
								</div>
								<div class="sensor-card__item">
									<span class="sensor-card__label">Batería:</span>
									<span class="sensor-card__value">15 meses</span>
								</div>
								<div class="sensor-card__item">
									<span class="sensor-card__label">Instalación:</span>
									<span class="sensor-card__value">20/02/2024</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Tab 3: Insumos (Initially hidden via CSS) -->
			<div class="create-tab-content tab-insumos hidden">
				<div class="form-section">
					<h2 class="form-section__title">Insumos</h2>
					<p class="form-section__description">
						Seleccione los insumos para esta producción
					</p>

					<div class="form-field form-field--full">
						<label class="form-field__label">Insumos</label>
						<div class="form-field__dropdown-container">
							<div class="selected-counter">2 insumos seleccionados</div>
							<button class="dropdown-button">
								<span class="material-symbols-outlined">expand_more</span>
							</button>
							<button class="form-field__action-button">
								<span class="material-symbols-outlined">add_circle</span>
							</button>
						</div>
					</div>

					<!-- Insumos Dropdown -->
					<div class="insumos-dropdown">
						<div class="insumos-search">
							<span class="material-symbols-outlined">search</span>
							<input type="text" placeholder="Buscar insumo..." />
						</div>

						<div class="insumo-item">
							<input type="checkbox" checked />
							<div class="insumo-details">
								<div class="insumo-name">Fertilizante NPK</div>
								<div class="insumo-tag">Convencional</div>
								<div class="insumo-info">
									<span>Proveedor: AgroInsumos S.A.</span>
									<span>$25.000</span>
								</div>
								<div class="insumo-info">
									<span>Presentación: 25 kg</span>
									<span>Stock: 500 kg</span>
								</div>
								<div class="insumo-info">
									<span>Aplicación: 250-300 kg/ha</span>
								</div>
							</div>
						</div>

						<div class="insumo-item">
							<input type="checkbox" checked />
							<div class="insumo-details">
								<div class="insumo-name">Semillas Certificadas</div>
								<div class="insumo-tag">Orgánico</div>
								<div class="insumo-info">
									<span>Proveedor: SemillasPro</span>
									<span>$15.000</span>
								</div>
								<div class="insumo-info">
									<span>Presentación: 10 kg</span>
									<span>Stock: 200 kg</span>
								</div>
								<div class="insumo-info">
									<span>Aplicación: 25-30 kg/ha</span>
								</div>
							</div>
						</div>

						<div class="insumo-item">
							<input type="checkbox" />
							<div class="insumo-details">
								<div class="insumo-name">Insecticida Orgánico</div>
								<div class="insumo-tag">Orgánico</div>
								<div class="insumo-info">
									<span>Proveedor: EcoAgro</span>
									<span>$18.000</span>
								</div>
								<div class="insumo-info">
									<span>Presentación: 5 L</span>
									<span>Stock: 150 L</span>
								</div>
								<div class="insumo-info">
									<span>Aplicación: 2-3 L/ha</span>
								</div>
							</div>
						</div>

						<div class="insumo-item">
							<input type="checkbox" />
							<div class="insumo-details">
								<div class="insumo-name">Fungicida</div>
								<div class="insumo-tag">Convencional</div>
								<div class="insumo-info">
									<span>Proveedor: AgroDefensa</span>
									<span>$22.000</span>
								</div>
								<div class="insumo-info">
									<span>Presentación: 1 L</span>
									<span>Stock: 75 L</span>
								</div>
								<div class="insumo-info">
									<span>Aplicación: 1-2 L/ha</span>
								</div>
							</div>
						</div>
					</div>

					<h3 class="subsection-title">Detalles de Insumos Seleccionados</h3>

					<div class="selected-insumos">
						<!-- Fertilizante NPK -->
						<div class="insumo-card insumo-card--blue">
							<div class="insumo-card__header">
								<div>
									<div class="insumo-card__title">Fertilizante NPK</div>
									<div class="insumo-card__type">
										<span class="insumo-tag">Convencional</span>
									</div>
								</div>
								<div class="insumo-card__proveedor">
									Proveedor: Agroinsumos S.A.
								</div>
								<div class="insumo-card__price">
									$25.000
									<span class="insumo-card__price-unit">por 25 kg</span>
								</div>
								<button class="insumo-card__remove">
									<span class="material-symbols-outlined">close</span>
								</button>
							</div>
							<div class="insumo-card__content">
								<div class="insumo-card__item">
									<span class="insumo-card__label">Presentación:</span>
									<span class="insumo-card__value">25 kg</span>
								</div>
								<div class="insumo-card__item">
									<span class="insumo-card__label">Dosis:</span>
									<span class="insumo-card__value">250-300 kg/ha</span>
								</div>
								<div class="insumo-card__item">
									<span class="insumo-card__label">Stock:</span>
									<span class="insumo-card__value">500 kg</span>
								</div>
								<div class="insumo-card__item">
									<span class="insumo-card__label">Composición:</span>
									<span class="insumo-card__value"
										>Nitrógeno (15%), Fósforo (15%), Potasio (15%)</span
									>
								</div>
							</div>
							<div class="insumo-card__description">
								Fertilizante balanceado para desarrollo general del cultivo
							</div>
						</div>

						<!-- Semillas Certificadas -->
						<div class="insumo-card insumo-card--green">
							<div class="insumo-card__header">
								<div>
									<div class="insumo-card__title">Semillas Certificadas</div>
									<div class="insumo-card__type">
										<span class="insumo-tag">Orgánico</span>
									</div>
								</div>
								<div class="insumo-card__proveedor">Proveedor: SemillasPro</div>
								<div class="insumo-card__price">
									$15.000
									<span class="insumo-card__price-unit">por 10 kg</span>
								</div>
								<button class="insumo-card__remove">
									<span class="material-symbols-outlined">close</span>
								</button>
							</div>
							<div class="insumo-card__content">
								<div class="insumo-card__item">
									<span class="insumo-card__label">Presentación:</span>
									<span class="insumo-card__value">10 kg</span>
								</div>
								<div class="insumo-card__item">
									<span class="insumo-card__label">Dosis:</span>
									<span class="insumo-card__value">25-30 kg/ha</span>
								</div>
								<div class="insumo-card__item">
									<span class="insumo-card__label">Stock:</span>
									<span class="insumo-card__value">200 kg</span>
								</div>
								<div class="insumo-card__item">
									<span class="insumo-card__label">Composición:</span>
									<span class="insumo-card__value"
										>Variedad mejorada resistente a sequía</span
									>
								</div>
							</div>
							<div class="insumo-card__description">
								Semillas de alta calidad con tratamiento antifúngico
							</div>
						</div>
					</div>

					<div class="insumo-usage">
						<h3 class="subsection-title">Uso de Insumos</h3>
						<button class="button button--primary button--register-use" id="openUsageFormBtn">
							<span class="material-symbols-outlined button__icon">edit</span>
							Registrar Uso
						</button>
					</div>
				</div>
			</div>
		</main>

		<!-- Modal for Input Usage Form -->
		<div class="modal" id="usageFormModal">
			<div class="modal-content">
				<div class="modal-header">
					<h2>Registrar Uso de Insumo</h2>
					<button class="modal-close" id="closeModal">
						<span class="material-symbols-outlined">close</span>
					</button>
				</div>
				<div class="modal-body">
					<form id="insumoUsageForm">
						<div class="form-row">
							<div class="form-field">
								<label class="form-field__label">Insumo</label>
								<div class="form-field__select-container">
									<select class="form-field__select" id="insumoSelect" required>
										<option value="">Seleccionar insumo</option>
										<option value="fertilizante">Fertilizante NPK</option>
										<option value="semillas">Semillas Certificadas</option>
									</select>
								</div>
							</div>
							<div class="form-field">
								<label class="form-field__label">Fecha de uso</label>
								<input type="date" class="form-field__date" id="usageDate" required value="2025-04-16" />
							</div>
						</div>
						<div class="form-row">
							<div class="form-field">
								<label class="form-field__label">Cantidad</label>
								<input type="number" class="form-field__input" id="usageQuantity" placeholder="Ej: 50" required min="1" step="0.1" />
								<span class="form-field__helper">Unidad según el insumo seleccionado (kg, L, etc.)</span>
							</div>
							<div class="form-field">
								<label class="form-field__label">Responsable</label>
								<div class="form-field__select-container">
									<select class="form-field__select" id="usageResponsible" required>
										<option value="">Seleccionar responsable</option>
										<option value="juan">Juan Pérez</option>
										<option value="maria">María López</option>
										<option value="carlos">Carlos Rodríguez</option>
									</select>
								</div>
							</div>
						</div>
						<div class="form-row">
							<div class="form-field">
								<label class="form-field__label">Valor unitario</label>
								<div class="form-field__currency-container">
									<span class="form-field__currency-symbol">$</span>
									<input type="number" class="form-field__currency" id="unitValue" required min="0" step="100" value="0" />
								</div>
							</div>
							<div class="form-field">
								<label class="form-field__label">Valor total</label>
								<div class="form-field__currency-container">
									<span class="form-field__currency-symbol">$</span>
									<input type="number" class="form-field__currency" id="totalValue" readonly value="0" />
								</div>
								<span class="form-field__helper">Calculado automáticamente</span>
							</div>
						</div>
						<div class="form-field form-field--full">
							<label class="form-field__label">Observaciones</label>
							<textarea class="form-field__textarea" id="usageObservations" rows="3" placeholder="Detalles sobre el uso del insumo..."></textarea>
						</div>
						<div class="form-actions">
							<button type="button" class="button button--outline" id="cancelUsageBtn">Cancelar</button>
							<button type="submit" class="button button--primary">Guardar Registro</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<script src="app.js"></script>
	</body>
</html>
