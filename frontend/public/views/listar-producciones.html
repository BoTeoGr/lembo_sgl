<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Sistema de Gestión Agrícola - Producciones</title>
		<link rel="stylesheet" href="../css/pages/listar.css">
		<link rel="shortcut icon" href="../imgs/logoSena.svg" type="image/x-icon" />

		<link rel="stylesheet" href="../css/components/navbar.css" />
		<link rel="stylesheet" href="../css/components/modal-list.css" />
		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0"
		/>
		<script type="module" src="../js/data/productionsData.js"></script>
		<script type="module" src="../js/pages/componentLoader.js"></script>
		<script type="module" src="../js/config/productionsConfig.js"></script>
		<script type="module" src="../js/pages/Productions.js"></script>
		<script src="../js/pages/ReportGenerator.js"></script>
	</head>
	<body>
		<nav class="nav-render"></nav>
		<main>
			<header>
				<h1 class="header__title">Gestión de Producciones</h1>
				<div class="header__buttons">
					<button class="button button--filter">
						<span class="material-symbols-outlined button__icon"
							>filter_alt</span
						>
						Filtros
					</button>
					<button class="button button--secondary button--create">
						<a href="crear-produccion.html" class="button__link">
							<span class="material-symbols-outlined button__icon"
								>add_circle</span
							>
							Crear produccion
						</a>
					</button>
				</div>
			</header>

			<div class="filters hidden">
				<div class="filters__header">
					<div class="filters__title-container">
						<h2 class="filters__title">Filtros</h2>
						<p class="filters__subtitle">
							Filtre las opciones por diferentes criterios
						</p>
					</div>
					<span class="material-symbols-outlined filters__close">close</span>
				</div>
				<div class="filters__content">
					<input
						type="text"
						class="filters__search"
						placeholder="Buscar por nombre o ID"
					/>
					<select class="filters__select" placeholder="Estado">
						<option value="">Todos</option>
						<option value="Activo">Activo</option>
						<option value="Inactivo">Inactivo</option>
					</select>
					<select class="filters__select" placeholder="Ciclo">
						<option value="">Todos</option>
						<option value="Primavera-Verano">Primavera - Verano</option>
						<option value="Otoño-Invierno">Otoño - Invierno</option>
					</select>
					<div class="filters__date-container">
						<label class="filters__date-label">Fecha de inicio:</label>
						<input type="date" class="filters__date" />
					</div>
					<div class="filters__date-container">
						<label class="filters__date-label">Fecha de fin:</label>
						<input type="date" class="filters__date" />
					</div>

					<button class="button button--clear">Limpiar filtros</button>
				</div>
			</div>

			<div class="actions-bar">
				<div class="actions-bar__selection">
					<input type="checkbox" class="actions-bar__checkbox" />
					<p class="actions-bar__count">
						<span class="actions-bar__count--selected">5</span> de
						<span class="actions-bar__count--total">10</span> Seleccionados
					</p>
				</div>
				<button class="button button--enable">
					<span class="material-symbols-outlined button__icon"
						>power_settings_new</span
					>
					Habilitar
				</button>
				<button class="button button--disable">
					<span class="material-symbols-outlined button__icon"
						>power_settings_new</span
					>
					Deshabilitar
				</button>
				<button class="button button--report">
					<span class="material-symbols-outlined button__icon">download</span>
					Generar Reporte
				</button>
			</div>
			<!-- Modal de Visualización -->
			<div class="modal modal--produccion" id="viewModal">
				<div class="modal__content modal__content--produccion">
					<div class="modal__header">
						<div class="modal__header-top">
							<div class="modal__titles">
								<h2 class="modal__title">Información de la Producción</h2>
								<p class="modal__subtitle">
									ID: <span id="viewId"></span>
								</p>
							</div>
							<button class="modal__close">
								<span class="material-symbols-outlined">close</span>
							</button>
						</div>

					</div>

					<div class="modal__body">
						<!-- Panel General con un solo grid y modificador para este modal -->
						<div class="modal__panel modal__panel--active" data-panel="general">
							<div class="modal-grid modal-grid--produccion">
								<div class="info-section">
									<h3 class="info-section__title">
										<span class="material-symbols-outlined info-section__icon">info</span>
										Información General
									</h3>
									<div class="info-section__content">
										<div class="info-item">
											<span class="info-item__label">ID</span>
											<span class="info-item__value" id="viewId">PROD-01042025-0001</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Nombre</span>
											<span class="info-item__value" id="viewName">Maíz Orgánico Zona Norte</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Estado</span>
											<span class="badge badge--active" id="viewStatus">Activo</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Tipo de Cultivo</span>
											<span class="info-item__value" id="viewCropType">Maíz</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Área Total</span>
											<span class="info-item__value" id="viewArea">45 hectáreas</span>
										</div>
									</div>
								</div>
								<div class="info-section">
									<h3 class="info-section__title">
										<span class="material-symbols-outlined info-section__icon">group</span>
										Personal
									</h3>
									<div class="info-section__content">
										<div class="info-item">
											<span class="info-item__label">Responsable</span>
											<span class="info-item__value" id="viewResponsible">Juan Pérez</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Supervisor</span>
											<span class="info-item__value" id="viewSupervisor">María García</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Técnico</span>
											<span class="info-item__value" id="viewTechnician">Carlos Rodríguez</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Personal Asignado</span>
											<span class="info-item__value" id="viewWorkers">8 personas</span>
										</div>
									</div>
								</div>
								<div class="info-section">
									<h3 class="info-section__title">
										<span class="material-symbols-outlined info-section__icon">science</span>
										Insumos y Sensores Asignados
									</h3>
									<div class="asignados-grid">
										<div class="info-item">
											<span class="info-item__label">Insumos</span>
											<span class="info-item__value" id="viewInsumos">-</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Sensores</span>
											<span class="info-item__value" id="viewSensores">-</span>
										</div>
									</div>
								</div>
								<div class="info-section">
									<h3 class="info-section__title">
										<span class="material-symbols-outlined info-section__icon">calendar_month</span>
										Fechas
									</h3>
									<div class="info-section__content">
										<div class="info-item">
											<span class="info-item__label">Inicio</span>
											<span class="info-item__value" id="viewStartDate">01/04/2025</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Fin esperado</span>
											<span class="info-item__value" id="viewEndDate">15/09/2025</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Duración Total</span>
											<span class="info-item__value" id="viewDuration">168 días</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Días Restantes</span>
											<span class="info-item__value" id="viewDaysLeft">120 días</span>
										</div>
									</div>
								</div>
								<div class="info-section">
									<h3 class="info-section__title">
										<span class="material-symbols-outlined info-section__icon">attach_money</span>
										Financiero
									</h3>
									<div class="info-section__content">
										<div class="info-item">
											<span class="info-item__label">Inversión</span>
											<span class="info-item__value" id="viewInvestment">$58,000</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Retorno esperado</span>
											<span class="info-item__value" id="viewExpectedReturn">$92,800</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">ROI estimado</span>
											<span class="info-item__value" id="viewROI">60%</span>
										</div>
										<div class="info-item">
											<span class="info-item__label">Costo por Hectárea</span>
											<span class="info-item__value" id="viewCostPerHectare">$1,289</span>
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Panel de Sensores -->
						<div class="modal__panel" data-panel="sensores">
							<div class="sensors-grid" id="sensoresContent">
								<!-- Se llenará dinámicamente -->
							</div>
						</div>

						<!-- Panel de Insumos -->
						<div class="modal__panel" data-panel="insumos">
							<div class="supplies-grid" id="insumosContent">
								<!-- Se llenará dinámicamente -->
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<!-- Modal de Reporte -->
			<div class="modal" id="reportModal">
				<div class="modal__content">
					<div class="modal__header modal__header--confirm">
						<h2 class="modal__title">Generar Reporte</h2>
						<span class="modal__close" id="closeReportModal">
							<span class="material-symbols-outlined">close</span>
						</span>
					</div>
					<div class="modal__body">
						<form id="reportForm" class="form">
							<div class="form-field">
								<label class="form-field__label">Formato</label>
								<select class="form-field__select" id="reportFormat">
									<option value="excel">Excel (.xlsx)</option>
									<option value="pdf">PDF</option>
									<option value="csv">CSV</option>
								</select>
							</div>
							<div class="form-field">
								<label class="form-field__label">Incluir</label>
								<div class="form-field__checkbox-group">
									<label class="checkbox">
										<input type="checkbox" checked id="includeInactive" />
										Producciones inactivas
									</label>
									<label class="checkbox">
										<input type="checkbox" checked id="includeDetails" />
										Detalles completos
									</label>
									<label class="checkbox">
										<input type="checkbox" id="includeSensors" />
										Datos de sensores
									</label>
									<label class="checkbox">
										<input type="checkbox" id="includeSupplies" />
										Uso de insumos
									</label>
								</div>
							</div>
							<div class="form-field">
								<p id="confirmMessage" class="modal__confirm-message">
									¿Está seguro que desea generar el reporte con estas configuraciones?
								</p>
							</div>
						</form>
					</div>
					<div class="modal__footer modal__footer--confirm">
						<button class="button button--secondary" id="cancelReportBtn">
							Cancelar
						</button>
						<button class="button button--primary" id="generateReportBtn">
							Generar
						</button>
					</div>
				</div>
			</div>
			<!-- Modal Visualizar Producción -->
			<div class="modal" id="viewProduccionModal">
				<div class="modal__content">
					<div class="modal__header">
						<div class="modal__header-top">
							<div class="modal__titles">
								<h2 class="modal__title">Detalles de la Producción</h2>
								<div class="modal__subtitle" id="viewName">Maíz Orgánico Zona Norte</div>
							</div>
							<button class="modal__close" id="closeViewProduccionModal" type="button" title="Cerrar">
								<span class="material-symbols-outlined">close</span>
							</button>
						</div>
					</div>
					<div class="modal__body">
						<div class="modal__image-container">
							<img id="modalProduccionImagen" class="modal__image--default" src="../imgs/default-produccion.jpg" alt="Imagen de la producción" />
						</div>
						<table class="modal__table">
							<tbody>
								<tr><th>ID</th><td id="modalProduccionId"></td></tr>
								<tr><th>Nombre</th><td id="modalProduccionNombre"></td></tr>
								<tr><th>Cultivo</th><td id="modalProduccionCultivo"></td></tr>
								<tr><th>Ciclo</th><td id="modalProduccionCiclo"></td></tr>
								<tr><th>Responsable</th><td id="modalProduccionResponsable"></td></tr>
								<tr><th>Personal Asignado</th><td id="modalProduccionPersonal"></td></tr>
								<tr><th>Inversión</th><td id="modalProduccionInversion"></td></tr>
								<tr><th>Fecha de Inicio</th><td id="modalProduccionFechaInicio"></td></tr>
								<tr><th>Estado</th><td id="modalProduccionEstado"></td></tr>
							</tbody>
						</table>
					</div>
					<div class="modal__footer">
						<button class="button button--secondary" id="closeViewProduccionBtn">Cerrar</button>
					</div>
				</div>
			</div>
			<!-- Modal para generar reporte de producciones -->
			<div class="modal" id="reportModalProduccion">
				<div class="modal__content">
					<div class="modal__header">
						<div class="modal__header-top">
							<div class="modal__titles">
								<h2 class="modal__title">Generar Reporte de Producciones</h2>
							</div>
							<button class="modal__close" id="closeReportModalProduccion" type="button" title="Cerrar">
								<span class="material-symbols-outlined">close</span>
							</button>
						</div>
					</div>
					<div class="modal__body">
						<form id="reportFormProduccion">
							<div class="form-field">
								<label for="reportFormat">Formato:</label>
								<select id="reportFormatProduccion">
									<option value="csv">CSV</option>
									<option value="excel">Excel</option>
									<option value="pdf">PDF</option>
								</select>
							</div>
							<div class="form-field">
								<label class="checkbox">
									<input type="checkbox" id="includeInactiveProduccion" /> Incluir inactivos
								</label>
								<label class="checkbox">
									<input type="checkbox" id="includeDetailsProduccion" checked /> Detalles completos
								</label>
								<label class="checkbox">
									<input type="checkbox" id="includeSensorsProduccion" /> Datos de sensores
								</label>
								<label class="checkbox">
									<input type="checkbox" id="includeSuppliesProduccion" /> Uso de insumos
								</label>
							</div>
							<div class="form-field">
								<p id="confirmMessageProduccion" class="modal__confirm-message">
									¿Está seguro que desea generar el reporte con estas configuraciones?
								</p>
							</div>
						</form>
					</div>
					<div class="modal__footer modal__footer--confirm">
						<button class="button button--secondary" id="cancelReportBtnProduccion">Cancelar</button>
						<button class="button button--primary" id="generateReportBtnProduccion">Generar</button>
					</div>
				</div>
			</div>
			<div class="table-container">
				<table class="table">
					<thead class="table__head">
						<tr class="table__row table__row--header">
							<th class="table__cell table__cell--header table__cell--checkbox">
								<input type="checkbox" class="table__checkbox-header" />
							</th>
							<th class="table__cell table__cell--header">ID</th>
							<th class="table__cell table__cell--header">Nombre</th>
							<th class="table__cell table__cell--header">Cultivo</th>
							<th class="table__cell table__cell--header">Ciclo</th>
							<th class="table__cell table__cell--header">Responsable</th>
							<th class="table__cell table__cell--header">Inversión</th>
							<th class="table__cell table__cell--header">Fecha de Inicio</th>
							<th class="table__cell table__cell--header">Estado</th>
							<th class="table__cell table__cell--header table__cell--actions">Acciones</th>
						</tr>
					</thead>
					<tbody class="table__body">
						<!-- Se llena dinámicamente desde JS -->
					</tbody>
				</table>
				<div class="pagination">
					<div class="pagination__info">
						Página <span class="pagination__current-page">1</span> de <span class="pagination__total-pages">1</span> |
						Mostrando <span class="pagination__items-per-page">10</span> de <span class="pagination__total-items">0</span> producciones
					</div>
					<div class="pagination__controls"></div>
				</div>
			</div>
		</main>
	</body>
</html>
